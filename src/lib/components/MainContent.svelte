<script lang="ts">
  import TimeDropdown from './TimeDropdown.svelte';
  import CharacterGrid from './CharacterGrid.svelte';
  import { settings, updatePauseDuration, updateSelectedCharacter } from '../stores/settings';

  function handleDurationSelect(duration: number) {
    updatePauseDuration(duration);
    console.log('ì‹œê°„ ì„¤ì • ì €ì¥:', duration, 'ë¶„');
  }

  function handleCharacterSelect(characterId: number) {
    updateSelectedCharacter(characterId);
    console.log('ìºë¦­í„° ì„¤ì • ì €ì¥:', characterId);
  }

  function saveSettings() {
    // í˜„ì¬ ì„¤ì •ë“¤ì´ ì´ë¯¸ ìë™ìœ¼ë¡œ ì €ì¥ë˜ë¯€ë¡œ ì‚¬ìš©ìì—ê²Œ í”¼ë“œë°±ë§Œ ì œê³µ
    console.log('ëª¨ë“  ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤');
    // TODO: ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
  }

  function openVocabulary() {
    console.log('Opening vocabulary');
  }
</script>

<div class="space-y-6">
  <!-- í—¤ë” -->
  <div class="flex items-center justify-between">
    <h1 class="text-xl font-medium text-color-text">ì™€ìš°ì´ì™€ ì˜ì–´í•´ìš”</h1>
    <button class="text-color-text-secondary hover:text-color-text transition-colors" aria-label="ë‹«ê¸°">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
  </div>

  <!-- ì™€ìš°ì´ ì ì‹œ êº¼ë‘ê¸° ì„¹ì…˜ -->
  <div class="space-y-4">
    <h2 class="text-lg font-medium text-color-text">ì™€ìš°ì´ ì ì‹œ êº¼ë‘ê¸°</h2>
    <p class="text-color-text-secondary text-sm">
      ì ê¹! ì§‘ì¤‘í•´ì„œ í•´ì•¼ í•  ì¼ì´ ìˆë‚˜ìš”? ì ì‹œ ë’¤ì— ë‹¤ì‹œ ë§Œë‚˜ìš”!
    </p>
    
    <div class="space-y-3">
      <TimeDropdown 
        duration={$settings.pauseDuration} 
        onSelect={handleDurationSelect} 
      />
      <div class="flex justify-end">
        <button 
          class="px-6 py-2 bg-color-accent hover:bg-opacity-90 text-white rounded-lg transition-all duration-200 font-medium"
          onclick={saveSettings}
        >
          ì €ì¥
        </button>
      </div>
    </div>
  </div>

  <!-- ì™€ìš°ì´ì˜ ì˜·ì¥ ì„¹ì…˜ -->
  <div class="space-y-4">
    <div class="flex items-center gap-2">
      <h2 class="text-lg font-medium text-color-text">ì™€ìš°ì´ì˜ ì˜·ì¥</h2>
    </div>
    <p class="text-color-text-secondary text-sm flex items-center gap-1">
      ì™€ìš°ì´ì˜ ì˜·ì„ ê³¨ë¼ì£¼ì„¸ìš” 
      <span class="text-lg">ğŸ˜</span>
    </p>
    
    <CharacterGrid 
      selectedId={$settings.selectedCharacter}
      onSelect={handleCharacterSelect}
    />
  </div>

  <!-- í•˜ë‹¨ êµ¬ë¶„ì„ ê³¼ ë§í¬ -->
  <div class="border-t border-color-border pt-4">
    <button 
      class="flex items-center justify-between w-full text-color-text hover:text-color-accent transition-colors"
      onclick={openVocabulary}
    >
      <span class="font-medium">ë‹¨ì–´ì¥ ë°”ë¡œê°€ê¸°</span>
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </button>
  </div>
</div>
